[gd_scene load_steps=111 format=3 uid="uid://dk7fk1wx4ybng"]

[sub_resource type="GDScript" id="GDScript_m0r3c"]
script/source = "extends CharacterBody2D 

@export var gravity := 1000
@export var max_health := 100
@export var damage_flash_time := 0.1
@export var attack_damage := 40
@export var attack_cooldown := 1.5
@export var dash_speed := 150

var current_health := max_health
var is_alive := true
var can_attack := true
var is_attacking := false
var player_in_area: Node2D = null
var phase := 1
var phase2_triggered := false
var phase3_triggered := false


signal boss_defeated
@onready var body_collider = $CollisionShape2D
@onready var sprite: AnimatedSprite2D = $AnimatedSprite2D
@onready var attack_area: Area2D = $AttackArea
@onready var attack_timer := Timer.new()
@onready var attack_damage_timer := Timer.new()
@onready var attack_shape := $AttackArea/CollisionShape2D


func _ready():
	add_to_group(\"enemy\")
	sprite.play(\"idle\")

	attack_timer.wait_time = attack_cooldown
	attack_timer.one_shot = true
	attack_timer.connect(\"timeout\", _on_attack_timer_timeout)
	add_child(attack_timer)

	attack_damage_timer.wait_time = 0.5
	attack_damage_timer.one_shot = false
	attack_damage_timer.connect(\"timeout\", _on_attack_damage_tick)
	add_child(attack_damage_timer)

	attack_area.connect(\"body_entered\", _on_attack_area_body_entered)
	attack_area.connect(\"body_exited\", _on_attack_area_body_exited)

func _physics_process(delta):
	if not is_on_floor():
		velocity.y += gravity * delta
	else:
		velocity.y = 0

	move_and_slide()

	# Si el jugador está cerca y puede atacar
	if player_in_area and can_attack and not is_attacking:
		start_attack(player_in_area)

func take_damage(amount := 1):
	if not is_alive:
		return

	current_health -= amount
	print(\"💢 Boss herido:\", current_health, \"HP\")
	sprite.play(\"hit\")
	await sprite.animation_finished
	sprite.play(\"idle\")

	if not phase2_triggered and current_health <= 75:
		enter_phase_2()
	if not phase3_triggered and current_health <= 50:
		enter_phase_3()

	if current_health <= 0:
		die()

func die():
	var stage = get_tree().get_current_scene()
	if stage and stage.has_method(\"registrar_enemigo_derrotado\"):
		stage.registrar_enemigo_derrotado()
	is_alive = false
	print(\"☠️ Boss derrotado, emitiendo señal\")
	emit_signal(\"boss_defeated\")
	queue_free()

func enter_phase_2():
	phase = 2
	phase2_triggered = true
	attack_cooldown = 1.2
	sprite.modulate = Color(1, 0.7, 0.3)
	print(\"🔥 FASE 2 ACTIVADA\")

	# Expandir el área de ataque (círculo)
	if attack_shape.shape is CircleShape2D:
		attack_shape.shape.radius = 100  # ajusta el radio como desees
		
func enter_phase_3():
	phase = 3
	phase3_triggered = true
	attack_cooldown = 0.8
	sprite.modulate = Color(1, 0.2, 0.2)
	print(\"💀 FASE 3 ACTIVADA\")

	# Restaurar radio del área de ataque
	if attack_shape.shape is CircleShape2D:
		attack_shape.shape.radius = 40  # ← valor original


func start_attack(target):
	can_attack = false
	is_attacking = true

	match phase:
		1:
			sprite.play(\"attack_1\")
			await get_tree().create_timer(0.3).timeout
		2:
			sprite.play(\"dash\")
			await dash_towards_player()
		3:
			sprite.play(\"attack_2\")
			await get_tree().create_timer(0.3).timeout

	if player_in_area:
		attack_damage_timer.start()

	await sprite.animation_finished
	sprite.play(\"idle\")
	is_attacking = false
	attack_damage_timer.stop()
	attack_timer.start()


func dash_towards_player():
	if not player_in_area:
		return

	var direction: Vector2 = (player_in_area.global_position - global_position).normalized()
	var dash_direction: int = sign(direction.x)
	sprite.flip_h = dash_direction < 0

	# ⚠️ Ignora colisiones con el jugador (solo deja Ground por ejemplo)
	set_collision_mask(1)  # Suponiendo que Ground está en la capa 1

	var dash_time: float = 0.4
	var elapsed: float = 0.0
	var has_damaged: bool = false  # ✅ Para evitar múltiples daños durante el dash

	while elapsed < dash_time:
		velocity.x = dash_direction * dash_speed
		move_and_slide()

		# ✅ Daño si atraviesa al jugador
		for body in attack_area.get_overlapping_bodies():
			if body.name == \"Player\" and body.has_method(\"take_damage\") and not has_damaged:
				print(\"💥 Daño por dash!\")
				body.take_damage(attack_damage)
				has_damaged = true

		# Usa el Timer local (debes tener uno llamado DashWaitTimer)
		$DashWaitTimer.start(0.01)
		await $DashWaitTimer.timeout

		elapsed += 0.01

	# Detener movimiento tras el dash
	velocity.x = 0

	# ✅ Restaura colisiones normales (con el jugador)
	set_collision_mask(1 | 2)  # Asegúrate de que Player esté en capa 2 si usas esto



func _on_attack_damage_tick():
	if player_in_area and player_in_area.has_method(\"take_damage\"):
		player_in_area.take_damage(attack_damage)

func _on_attack_area_body_entered(body):
	if body.name == \"Player\":
		player_in_area = body
		if is_attacking:
			attack_damage_timer.start()

func _on_attack_area_body_exited(body):
	if body == player_in_area:
		player_in_area = null
		attack_damage_timer.stop()

func _on_attack_timer_timeout():
	can_attack = true
	
	
"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_cm88y"]
load_path = "res://.godot/imported/spr_RoninAttack_strip.png-5727b4e9a34c64295e41d1fdb73ca519.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_rldbp"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(0, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_garvb"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(128, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_wp7ho"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(256, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_btu7j"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(384, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_d5c28"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(512, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_ht0ke"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(640, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_v3ekv"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(768, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_gjtvs"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(896, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_lhu2o"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1024, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_m5osj"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1152, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_djn0o"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1280, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_txnyb"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1408, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_kxn10"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1536, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_vpcgm"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1664, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_awbia"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1792, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_3bsqa"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(1920, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_iwx2w"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2048, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_t12od"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2176, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_cdyvx"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2304, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_6fxbs"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2432, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_eytkc"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2560, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_upmau"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2688, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_eylug"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2816, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_6rrm4"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(2944, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_t7qgc"]
atlas = SubResource("CompressedTexture2D_cm88y")
region = Rect2(3072, 0, 128, 96)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_ebtmr"]
load_path = "res://.godot/imported/spr_RoninAttackAlt_strip.png-46703053c972363848b6dbfcb9ffc4e9.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_k4q2l"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(0, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_qiell"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(128, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_b35x8"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(256, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_j8q0d"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(384, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_8tsfp"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(512, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_8b0v2"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(640, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_wedwh"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(768, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_wmysy"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(896, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_bh5b0"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1024, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_h5qds"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1152, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_5idn7"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1280, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_nv83g"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1408, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_v74w5"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1536, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_3ph1w"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1664, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_xpk28"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1792, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_e36rd"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(1920, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_omodi"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2048, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_clfhp"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2176, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_rea1d"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2304, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_xad8n"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2432, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_jmjx8"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2560, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_n7hd0"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2688, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_hxr5e"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2816, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_e2fcm"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(2944, 0, 128, 96)

[sub_resource type="AtlasTexture" id="AtlasTexture_0lg3w"]
atlas = SubResource("CompressedTexture2D_ebtmr")
region = Rect2(3072, 0, 128, 96)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_6hu88"]
load_path = "res://.godot/imported/spr_RoninDash_strip.png-dfa9705681003663e12545e41dd23185.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_2cal4"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_2rxxj"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_de2fl"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_p6f0d"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_uekqe"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ty18c"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_nqjcu"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(512, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_oeq30"]
atlas = SubResource("CompressedTexture2D_6hu88")
region = Rect2(576, 0, 64, 64)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_rde8f"]
load_path = "res://.godot/imported/spr_RoninGetHit_strip.png-818eac017b70b9f40097cc81fadeb52b.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_fpqpk"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_locqx"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5pscv"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_u53nv"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_7653g"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_tif8k"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_7is1e"]
atlas = SubResource("CompressedTexture2D_rde8f")
region = Rect2(384, 0, 64, 64)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_jaerv"]
load_path = "res://.godot/imported/spr_RoninIdle_strip.png-f4dfaa09790f4754f8d0931fc62bf509.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_0gn7e"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_h5yie"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_mmrsi"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3nb3j"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ttgi6"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_5yrvd"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_va1md"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_lnyh2"]
atlas = SubResource("CompressedTexture2D_jaerv")
region = Rect2(448, 0, 64, 64)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_67svc"]
load_path = "res://.godot/imported/spr_RoninJump_strip.png-1de9b6bd0213a9f3f38b0e20ef9238c2.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_5fskk"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3ecew"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_rq3tc"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gy50m"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_k4jo7"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_m4jwp"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gh22v"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qwe3i"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ui7ym"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(512, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_uo3m5"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(576, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_e4jcv"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(640, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_23nwt"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(704, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_23oh7"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(768, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_41g21"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(832, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vfa8e"]
atlas = SubResource("CompressedTexture2D_67svc")
region = Rect2(896, 0, 64, 64)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_n317a"]
load_path = "res://.godot/imported/spr_RoninRun_strip.png-b58bbbc5b006c58bdf9ee2febabccef5.ctex"

[sub_resource type="AtlasTexture" id="AtlasTexture_mkrti"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(0, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_3avkj"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(64, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_vd2nb"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(128, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_13qfc"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(192, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_qb8sa"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(256, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_1wvna"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(320, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_6nbcj"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(384, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_bugli"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(448, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_w7g3l"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(512, 0, 64, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_oqe25"]
atlas = SubResource("CompressedTexture2D_n317a")
region = Rect2(576, 0, 64, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_a8adf"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rldbp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_garvb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wp7ho")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_btu7j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_d5c28")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ht0ke")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v3ekv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gjtvs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lhu2o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m5osj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_djn0o")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_txnyb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_kxn10")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vpcgm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_awbia")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3bsqa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_iwx2w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t12od")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cdyvx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6fxbs")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_eytkc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_upmau")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_eylug")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6rrm4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_t7qgc")
}],
"loop": false,
"name": &"attack_1",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_k4q2l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qiell")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_b35x8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_j8q0d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8tsfp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_8b0v2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wedwh")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wmysy")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bh5b0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h5qds")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5idn7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nv83g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_v74w5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3ph1w")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xpk28")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e36rd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_omodi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_clfhp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rea1d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xad8n")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jmjx8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_n7hd0")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hxr5e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e2fcm")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_0lg3w")
}],
"loop": false,
"name": &"attack_2",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2cal4")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2rxxj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_de2fl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_p6f0d")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uekqe")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ty18c")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_nqjcu")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oeq30")
}],
"loop": false,
"name": &"dash",
"speed": 19.0
}, {
"frames": [],
"loop": true,
"name": &"default",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fpqpk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_locqx")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5pscv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_u53nv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7653g")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tif8k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7is1e")
}],
"loop": false,
"name": &"hit",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_0gn7e")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_h5yie")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_mmrsi")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3nb3j")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ttgi6")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_5yrvd")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_va1md")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lnyh2")
}],
"loop": true,
"name": &"idle",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_5fskk")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3ecew")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rq3tc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gy50m")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_k4jo7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_m4jwp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gh22v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qwe3i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ui7ym")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_uo3m5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e4jcv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_23nwt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_23oh7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_41g21")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vfa8e")
}],
"loop": false,
"name": &"jump",
"speed": 9.0
}, {
"frames": [],
"loop": true,
"name": &"new_animation",
"speed": 9.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_mkrti")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_3avkj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_vd2nb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_13qfc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_qb8sa")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_1wvna")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_6nbcj")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_bugli")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w7g3l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_oqe25")
}],
"loop": true,
"name": &"run",
"speed": 9.0
}]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_m8j6r"]
radius = 15.0
height = 52.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_lh25h"]
radius = 21.0
height = 58.0

[sub_resource type="CircleShape2D" id="CircleShape2D_m8j6r"]
radius = 33.0151

[node name="Boss" type="CharacterBody2D"]
collision_layer = 4
collision_mask = 3
script = SubResource("GDScript_m0r3c")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="."]
position = Vector2(32, 29)
scale = Vector2(1.17188, 1.5)
sprite_frames = SubResource("SpriteFrames_a8adf")
animation = &"idle"

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(33, 27)
shape = SubResource("CapsuleShape2D_m8j6r")

[node name="Hurtbox" type="Area2D" parent="."]

[node name="CollisionShape2D" type="CollisionShape2D" parent="Hurtbox"]
position = Vector2(33, 27)
shape = SubResource("CapsuleShape2D_lh25h")
debug_color = Color(0.992157, 0, 0.239216, 0.12549)

[node name="AttackArea" type="Area2D" parent="."]
collision_mask = 3

[node name="CollisionShape2D" type="CollisionShape2D" parent="AttackArea"]
position = Vector2(33, 27)
shape = SubResource("CircleShape2D_m8j6r")
debug_color = Color(0.614875, 0.536856, 1.92523e-07, 0.42)

[node name="DashWaitTimer" type="Timer" parent="."]
one_shot = true
